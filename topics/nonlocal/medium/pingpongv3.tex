\begin{blocksection}
\question \textbf{Pingpong again...}\\
\begin{nonsol}
Time for some more ping-pong!
Remember, the ping-pong sequence counts up starting from 1 and is
always either counting up or counting down. At element k, the direction switches if k is a multiple of 8 or contains the
digit 8.

The first 20 elements of the ping-pong sequence are listed below, with direction
swaps marked using brackets at the 8th, 16th, and 18th elements
\begin{lstlisting}
1 2 3 4 5 6 7 [8] 7 6 5 4 3 2 1 [0] 1 [2] 1 0
\end{lstlisting}
\end{nonsol}

Implement a function \texttt{make\char`_pingpong\char`_tracker} that returns a function that returns
the next value in the pingpong sequence each time it is called. You may use assignment statements.
\newline

\begin{lstlisting}
def has_eight(k): # Use this function for your answer below
    if k % 10 == 8:
        return True
    elif k < 10:
        return False
    else:
        return has_eight(k // 10)
\end{lstlisting}

\begin{nonsol}
\begin{lstlisting}

def make_pingpong_tracker():
    """ Returns a function that returns the next value in the
    pingpong sequence each time it is called.
    >>> output = []
    >>> x = make_pingpong_tracker()
    >>> for _ in range(9):
    ... output += [x()]
    >>> output
    [1, 2, 3, 4, 5, 6, 7, 8, 7]
    """
    index, current, add = 1, 0, True
    def pingpong_tracker():
        ___________________________
        if add:
            ________________________
        else:
            ________________________
        if _______________________:
            add = not add
        __________________________
        __________________________

    return pingpong_tracker
\end{lstlisting}
\end{nonsol}

\begin{solution}
\begin{lstlisting}
def make_pingpong_tracker():
    index, current, add = 1, 0, True
    def pingpong_tracker():
        nonlocal index, current, add
        if add:
            current = current + 1
        else:
            current = current - 1
        if has_eight(index) or index % 8 == 0:
            add = not add
        index += 1
        return current
    return pingpong_tracker
\end{lstlisting}
\end{solution}

\end{blocksection}
